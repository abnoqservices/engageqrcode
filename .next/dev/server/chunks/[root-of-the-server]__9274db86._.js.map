{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage-update/app/api/landing-html/%5Bslug%5D/route.ts"],"sourcesContent":["export async function GET(req: NextRequest, context: any) {\n  try {\n    const { params } = await context; // â¬… FIX HERE\n\n    const url = new URL(req.url);\n\n    let templateName = url.searchParams.get(\"template\") || \"modern\";\n    let rawData = url.searchParams.get(\"data\");\n\n    if (!rawData || rawData === \"undefined\" || rawData === \"null\") {\n      rawData = null;\n    }\n\n    console.log(\"Generating landing page for slug:\", rawData);\n\n    const slug = params.slug as keyof typeof productsDatabase;\n    const productData = productsDatabase[slug];\n\n    if (!productData) {\n      return new NextResponse(`<h1>Product Not Found</h1>`, {\n        status: 404,\n        headers: { \"Content-Type\": \"text/html\" },\n      });\n    }\n\n    // SAFE template load\n    let templateHtml = \"\";\n    try {\n      templateHtml = await loadTemplate(templateName);\n    } catch (e) {\n      console.warn(\"Template load failed, using fallback:\", templateName);\n      templateHtml = await loadTemplate(\"modern\");\n    }\n\n    const html = renderLanding(productData, templateHtml, rawData);\n\n    return new NextResponse(html, {\n      status: 200,\n      headers: {\n        \"Content-Type\": \"text/html; charset=utf-8\",\n      },\n    });\n  } catch (error: any) {\n    console.error(\"Error generating landing page:\", error);\n    return new NextResponse(\n      `<h1>Server Error</h1><pre>${error.message}</pre>`,\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAO,eAAe,IAAI,GAAgB,EAAE,OAAY;IACtD,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,SAAS,aAAa;QAE/C,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;QAE3B,IAAI,eAAe,IAAI,YAAY,CAAC,GAAG,CAAC,eAAe;QACvD,IAAI,UAAU,IAAI,YAAY,CAAC,GAAG,CAAC;QAEnC,IAAI,CAAC,WAAW,YAAY,eAAe,YAAY,QAAQ;YAC7D,UAAU;QACZ;QAEA,QAAQ,GAAG,CAAC,qCAAqC;QAEjD,MAAM,OAAO,OAAO,IAAI;QACxB,MAAM,cAAc,gBAAgB,CAAC,KAAK;QAE1C,IAAI,CAAC,aAAa;YAChB,OAAO,IAAI,aAAa,CAAC,0BAA0B,CAAC,EAAE;gBACpD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAY;YACzC;QACF;QAEA,qBAAqB;QACrB,IAAI,eAAe;QACnB,IAAI;YACF,eAAe,MAAM,aAAa;QACpC,EAAE,OAAO,GAAG;YACV,QAAQ,IAAI,CAAC,yCAAyC;YACtD,eAAe,MAAM,aAAa;QACpC;QAEA,MAAM,OAAO,cAAc,aAAa,cAAc;QAEtD,OAAO,IAAI,aAAa,MAAM;YAC5B,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;QACF;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,IAAI,aACT,CAAC,0BAA0B,EAAE,MAAM,OAAO,CAAC,MAAM,CAAC,EAClD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}