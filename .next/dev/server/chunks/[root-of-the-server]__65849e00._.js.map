{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage3/app/api/thumbnail/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport puppeteer from \"puppeteer\";\n\nexport async function GET(req: Request) {\n  const { searchParams } = new URL(req.url);\n  const url = searchParams.get(\"url\");\n\n  if (!url) {\n    return NextResponse.json({ error: \"Missing URL\" }, { status: 400 });\n  }\n\n  try {\n    const browser = await puppeteer.launch({\n      args: [\"--no-sandbox\", \"--disable-setuid-sandbox\"],\n    });\n\n    const page = await browser.newPage();\n\n    // Optional: set width of the page before screenshot\n    await page.setViewport({ width: 1200, height: 800 });\n\n    await page.goto(url, { waitUntil: \"networkidle0\" });\n\n    // ðŸ“Œ Capture ONLY the top part of the page\n    const screenshot = await page.screenshot({\n      type: \"png\",\n      clip: {\n        x: 0,\n        y: 0,\n        width: 1200,   // MUST match viewport width\n        height: 800   // <-- how much of the top you want\n      }\n    });\n\n    await browser.close();\n\n    return new NextResponse(screenshot, {\n      headers: { \"Content-Type\": \"image/png\" },\n    });\n\n  } catch (e) {\n    console.error(\"Screenshot error:\", e);\n    return NextResponse.json({ error: \"Screenshot failed\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEO,eAAe,IAAI,GAAY;IACpC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,MAAM,aAAa,GAAG,CAAC;IAE7B,IAAI,CAAC,KAAK;QACR,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAc,GAAG;YAAE,QAAQ;QAAI;IACnE;IAEA,IAAI;QACF,MAAM,UAAU,MAAM,6HAAS,CAAC,MAAM,CAAC;YACrC,MAAM;gBAAC;gBAAgB;aAA2B;QACpD;QAEA,MAAM,OAAO,MAAM,QAAQ,OAAO;QAElC,oDAAoD;QACpD,MAAM,KAAK,WAAW,CAAC;YAAE,OAAO;YAAM,QAAQ;QAAI;QAElD,MAAM,KAAK,IAAI,CAAC,KAAK;YAAE,WAAW;QAAe;QAEjD,2CAA2C;QAC3C,MAAM,aAAa,MAAM,KAAK,UAAU,CAAC;YACvC,MAAM;YACN,MAAM;gBACJ,GAAG;gBACH,GAAG;gBACH,OAAO;gBACP,QAAQ,IAAM,mCAAmC;YACnD;QACF;QAEA,MAAM,QAAQ,KAAK;QAEnB,OAAO,IAAI,gJAAY,CAAC,YAAY;YAClC,SAAS;gBAAE,gBAAgB;YAAY;QACzC;IAEF,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAoB,GAAG;YAAE,QAAQ;QAAI;IACzE;AACF"}}]
}